<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extra Recipes for Text Processing • textrecipes</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="tidyverse-2.css" rel="stylesheet">
<meta property="og:title" content="Extra Recipes for Text Processing">
<meta property="og:description" content="Converting text to numerical features requires
    specifically created procedures, which are implemented as steps
    according to the recipes package. These steps allows for
    tokenization, filtering, counting (tf and tfidf) and feature hashing.">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="index.html">textrecipes</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of <a href="https://tidymodels.org">tidymodels</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.3.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Working-with-n-grams.html">Working with n-grams</a>
    </li>
    <li>
      <a href="articles/cookbook---using-more-complex-recipes-involving-text.html">Cookbook - Using more complex recipes involving text</a>
    </li>
    <li>
      <a href="articles/tokenlist.html">Under the hood - tokenlist</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/textrecipes/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="textrecipes" class="section level1">

<!-- badges: start -->

<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><strong>textrecipes</strong> contain extra steps for the <a href="https://CRAN.R-project.org/package=recipes"><code>recipes</code></a> package for preprocessing text data.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of textrecipes from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"textrecipes"</span>)</pre></div>
<p>Install the development version from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="st">"devtools"</span>)
<span class="fu">install_github</span>(<span class="st">"tidymodels/textrecipes"</span>)</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>In the following example we will go through the steps needed, to convert a character variable to the TF-IDF of its tokenized words after removing stopwords, and, limiting ourself to only the 100 most used words. The preprocessing will be conducted on the variable <code>essay0</code> and <code>essay1</code>.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">recipes</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">textrecipes</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">modeldata</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">okc_text</span>)

<span class="no">okc_rec</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/recipes/man/recipe.html">recipe</a></span>(~  <span class="no">essay0</span> + <span class="no">essay1</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">okc_text</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_tokenize.html">step_tokenize</a></span>(<span class="no">essay0</span>, <span class="no">essay1</span>) <span class="kw">%&gt;%</span> <span class="co"># Tokenizes to words by default</span>
  <span class="fu"><a href="reference/step_stopwords.html">step_stopwords</a></span>(<span class="no">essay0</span>, <span class="no">essay1</span>) <span class="kw">%&gt;%</span> <span class="co"># Uses the english snowball list by default</span>
  <span class="fu"><a href="reference/step_tokenfilter.html">step_tokenfilter</a></span>(<span class="no">essay0</span>, <span class="no">essay1</span>, <span class="kw">max_tokens</span> <span class="kw">=</span> <span class="fl">100</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_tfidf.html">step_tfidf</a></span>(<span class="no">essay0</span>, <span class="no">essay1</span>)

<span class="no">okc_obj</span> <span class="kw">&lt;-</span> <span class="no">okc_rec</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/recipes/man/prep.html">prep</a></span>()

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/recipes/man/bake.html">bake</a></span>(<span class="no">okc_obj</span>, <span class="no">okc_text</span>), <span class="kw">list.len</span> <span class="kw">=</span> <span class="fl">15</span>)
<span class="co">#&gt; tibble [750 × 200] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ tfidf_essay0_also      : num [1:750] 0 0 0.0252 0.2232 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_always    : num [1:750] 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_amp       : num [1:750] 0.47 0.583 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_anything  : num [1:750] 0 0 0.113 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_area      : num [1:750] 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_around    : num [1:750] 0 0 0.0348 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_art       : num [1:750] 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_back      : num [1:750] 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_bay       : num [1:750] 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_believe   : num [1:750] 0 0 0 0 0.314 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_big       : num [1:750] 0.0781 0 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_bit       : num [1:750] 0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_br        : num [1:750] 0.121 0.565 0.121 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_can       : num [1:750] 0.0488 0 0.0244 0 0 ...</span>
<span class="co">#&gt;  $ tfidf_essay0_city      : num [1:750] 0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;   [list output truncated]</span></pre></div>
</div>
<div id="type-chart" class="section level2">
<h2 class="hasAnchor">
<a href="#type-chart" class="anchor"></a>Type chart</h2>
<p><strong>textrecipes</strong> includes a little departure in design from <strong>recipes</strong>, in the sense that it allows for some input and output to be in the form of list columns. To avoid confusion, here is a table of steps with their expected input and output respectively. Notice how you need to end with numeric for future analysis to work.</p>
<table class="table">
<thead><tr class="header">
<th>Step</th>
<th>Input</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/step_tokenize.html">step_tokenize()</a></code></td>
<td>character</td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/step_untokenize.html">step_untokenize()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td>character</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_lemma.html">step_lemma()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/step_stem.html">step_stem()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_stopwords.html">step_stopwords()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/step_pos_filter.html">step_pos_filter()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_ngram.html">step_ngram()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/step_tokenfilter.html">step_tokenfilter()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_tokenmerge.html">step_tokenmerge()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
</tr>
<tr class="even">
<td><code><a href="reference/step_tfidf.html">step_tfidf()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_tf.html">step_tf()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td>numeric</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_texthash.html">step_texthash()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_word_embeddings.html">step_word_embeddings()</a></code></td>
<td><code><a href="reference/tokenlist.html">tokenlist()</a></code></td>
<td>numeric</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_textfeature.html">step_textfeature()</a></code></td>
<td>character</td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_sequence_onehot.html">step_sequence_onehot()</a></code></td>
<td>character</td>
<td>numeric</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_lda.html">step_lda()</a></code></td>
<td>character</td>
<td>numeric</td>
</tr>
</tbody>
</table>
<p>This means that valid sequences includes</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/recipes/man/recipe.html">recipe</a></span>(~ <span class="no">.</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">data</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_tokenize.html">step_tokenize</a></span>(<span class="no">text</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_stem.html">step_stem</a></span>(<span class="no">text</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_stopwords.html">step_stopwords</a></span>(<span class="no">text</span>) <span class="kw">%&gt;%</span>
  <span class="fu">step_topwords</span>(<span class="no">text</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_tf.html">step_tf</a></span>(<span class="no">text</span>)

<span class="co"># or</span>

<span class="fu"><a href="https://rdrr.io/pkg/recipes/man/recipe.html">recipe</a></span>(~ <span class="no">.</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">data</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_tokenize.html">step_tokenize</a></span>(<span class="no">text</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_stem.html">step_stem</a></span>(<span class="no">text</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/step_tfidf.html">step_tfidf</a></span>(<span class="no">text</span>)</pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=textrecipes">https://​cloud.r-project.org/​package=textrecipes</a>
</li>
<li>Browse source code at <br><a href="https://github.com/tidymodels/textrecipes/">https://​github.com/​tidymodels/​textrecipes/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/tidymodels/textrecipes/issues">https://​github.com/​tidymodels/​textrecipes/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Emil Hvitfeldt <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0679-1945" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/tidymodels/textrecipes/actions"><img src="https://github.com/tidymodels/textrecipes/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/github/tidymodels/textrecipes?branch=master"><img src="https://codecov.io/gh/tidymodels/textrecipes/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=textrecipes"><img src="http://www.r-pkg.org/badges/version/textrecipes" alt="CRAN status"></a></li>
<li><a href="https://CRAN.R-project.org/package=textrecipes"><img src="http://cranlogs.r-pkg.org/badges/textrecipes" alt="Downloads"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="tidyverse">
  <p>textrecipes is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Emil Hvitfeldt.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
